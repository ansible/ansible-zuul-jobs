---
# ansible-collections/openvswitch.openvswitch jobs
# =============================================================================
- job:
    name: ansible-network-openvswitch-appliance
    parent: ansible-network-appliance-base
    pre-run:
      - playbooks/ansible-network-openvswitch-appliance/pre.yaml
      - playbooks/network-ee-integration-tests/pre.yaml
    run: playbooks/ansible-network-openvswitch-appliance/run.yaml
    host-vars:
      openvswitch-2.9.0:
        ansible_network_os: openvswitch
    required-projects:
      - name: github.com/ansible/ansible-zuul-jobs
    nodeset: openvswitch-2.9.0-python38

- job:
    name: ansible-test-network-integration-openvswitch
    abstract: true
    dependencies:
      - name: build-ansible-collection
        soft: true
    parent: ansible-network-openvswitch-appliance
    pre-run:
      - playbooks/ansible-test-base/pre.yaml
      - playbooks/ansible-test-network-integration-base/pre.yaml
    run: playbooks/ansible-test-base/run.yaml
    post-run:
      - playbooks/ansible-test-network-integration-base/post.yaml
      - playbooks/ansible-test-base/post.yaml
    required-projects:
      - name: github.com/ansible/ansible
      - name: github.com/ansible-collections/openvswitch.openvswitch
    timeout: 3600
    vars:
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch
      ansible_test_command: network-integration
      ansible_test_integration_targets: "openvswitch_.*"

- job:
    name: ansible-test-network-integration-openvswitch-python39
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    vars:
      ansible_test_python: 3.9

- job:
    name: ansible-test-network-integration-openvswitch-python39-stable215
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    required-projects:
      - name: github.com/ansible/ansible
        override-checkout: stable-2.15
    vars:
      ansible_test_collections: true
      ansible_test_python: 3.9

- job:
    name: ansible-test-network-integration-openvswitch-python39-stable214
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    required-projects:
      - name: github.com/ansible/ansible
        override-checkout: stable-2.14
    vars:
      ansible_test_python: 3.9

- job:
    name: ansible-test-network-integration-openvswitch-python39-stable213
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    required-projects:
      - name: github.com/ansible/ansible
        override-checkout: stable-2.13
    vars:
      ansible_test_collections: true
      ansible_test_python: 3.9

- job:
    name: ansible-test-network-integration-openvswitch-python39-stable212
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    required-projects:
      - name: github.com/ansible/ansible
        override-checkout: stable-2.12
    vars:
      ansible_test_python: 3.9

- job:
    name: ansible-test-network-integration-openvswitch-python39-stable29
    parent: ansible-test-network-integration-openvswitch
    nodeset: openvswitch-2.9.0-python38
    required-projects:
      - name: github.com/ansible/ansible
        override-checkout: stable-2.9
    vars:
      ansible_test_collections: true
      ansible_test_python: 3.9
