---
# ansible-collections/cisco.iosxr jobs

- job:
    name: ansible-network-iosxr-appliance
    parent: ansible-network-appliance-base
    pre-run:
      - playbooks/ansible-network-iosxr-appliance/pre.yaml
      - playbooks/network-ee-integration-tests/pre.yaml
    run: playbooks/ansible-network-iosxr-appliance/run.yaml
    host-vars:
      iosxr-7.0.2:
        ansible_network_os: iosxr
    required-projects:
      - name: github.com/ansible/ansible-zuul-jobs
    nodeset: iosxr-7.0.2-python38

- job:
    name: ansible-test-units-iosxr-python27
    parent: ansible-test-units-base-python27
    required-projects:
      - name: github.com/ansible-collections/cisco.iosxr
    vars:
      ansible_collections_repo: github.com/ansible-collections/cisco.iosxr

- job:
    name: ansible-test-units-iosxr-python35
    parent: ansible-test-units-base-python35
    required-projects:
      - name: github.com/ansible-collections/cisco.iosxr
    vars:
      ansible_collections_repo: github.com/ansible-collections/cisco.iosxr

- job:
    name: ansible-test-units-iosxr-python36
    parent: ansible-test-units-base-python36
    required-projects:
      - name: github.com/ansible-collections/cisco.iosxr
    vars:
      ansible_collections_repo: github.com/ansible-collections/cisco.iosxr

- job:
    name: ansible-test-units-iosxr-python37
    parent: ansible-test-units-base-python37
    required-projects:
      - name: github.com/ansible-collections/cisco.iosxr
    vars:
      ansible_collections_repo: github.com/ansible-collections/cisco.iosxr

# =============================================================================

- job:
    name: network-ee-integration-tests-iosxr
    parent: ansible-network-iosxr-appliance

- job:
    name: network-ee-integration-tests-iosxr-netconf
    parent: network-ee-integration-tests-iosxr
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,network_cli

- job:
    name: network-ee-integration-tests-iosxr-network_cli
    parent: network-ee-integration-tests-iosxr
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,netconf

- job:
    name: network-ee-integration-tests-iosxr-libssh
    parent: network-ee-integration-tests-iosxr-network_cli
    vars:
      ansible_test_network_cli_ssh_type: libssh

# ================================================================================

- job:
    name: network-ee-integration-tests-iosxr-stable-2.11
    parent: ansible-network-iosxr-appliance

- job:
    name: network-ee-integration-tests-iosxr-netconf-stable-2.11
    parent: network-ee-integration-tests-iosxr-stable-2.11
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,network_cli

- job:
    name: network-ee-integration-tests-iosxr-network_cli-stable-2.11
    parent: network-ee-integration-tests-iosxr-stable-2.11
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,netconf

- job:
    name: network-ee-integration-tests-iosxr-libssh-stable-2.11
    parent: network-ee-integration-tests-iosxr-network_cli-stable-2.11
    vars:
      ansible_test_network_cli_ssh_type: libssh

# ================================================================================

- job:
    name: network-ee-integration-tests-iosxr-stable-2.9
    parent: ansible-network-iosxr-appliance

- job:
    name: network-ee-integration-tests-iosxr-netconf-stable-2.9
    parent: network-ee-integration-tests-iosxr-stable-2.9
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,network_cli

- job:
    name: network-ee-integration-tests-iosxr-network_cli-stable-2.9
    parent: network-ee-integration-tests-iosxr-stable-2.9
    nodeset: iosxr-7.0.2-python38
    vars:
      ansible_test_integration_targets: "iosxr_.*"
      ansible_test_skip_tags: local,netconf

- job:
    name: network-ee-integration-tests-iosxr-libssh-stable-2.9
    parent: network-ee-integration-tests-iosxr-network_cli-stable-2.9
    vars:
      ansible_test_network_cli_ssh_type: libssh
