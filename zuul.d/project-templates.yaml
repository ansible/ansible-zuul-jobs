---
- project-template:
    name: integrated-queue
    description: |
      Group projects together into a shared (integrated) change queue.
    check:
      queue: integrated
    gate:
      queue: integrated

- project-template:
    name: integrated-vmware-queue
    description: |
      Group projects together into a shared (integrated-vmware) change queue.
    check:
      queue: integrated-vmware
    gate:
      queue: integrated-vmware

- project-template:
    name: execution-environments-queue
    description: |
      Group projects together into a shared change queue for Execution Environments.
    gate:
      queue: execution-environments

- project-template:
    name: ansible-python-jobs
    description: |
      A common set of python jobs to run.
    check:
      jobs:
        - ansible-tox-linters
    gate:
      jobs:
        - ansible-tox-linters

- project-template:
    name: ansible-python3-jobs
    description: |
      Runs unit tests for an Ansible Python project under the CPython
      version 3 releases.
    check:
      jobs:
        - ansible-tox-py36
        - ansible-tox-py38
        - ansible-tox-py39
    gate:
      jobs:
        - ansible-tox-py36
        - ansible-tox-py38
        - ansible-tox-py39

- project-template:
    name: ansible-aws-ci-admin
    check:
      jobs:
        - ansible-tox-linters
    gate:
      jobs:
        - ansible-tox-linters

- project-template:
    name: ansible-collections-amazon-aws
    check:
      queue: integrated-aws
      jobs: &ansible-collections-amazon-aws-jobs
        - ansible-test-sanity-aws-ansible-python38:
            voting: false
        - ansible-test-sanity-aws-ansible-2.9-python38
        - ansible-test-sanity-aws-ansible-2.11-python38
        - ansible-test-sanity-aws-ansible-2.12-python38
        - ansible-test-sanity-aws-ansible-2.13-python38
        - ansible-test-sanity-aws-ansible-2.14
        - ansible-test-units-amazon-aws-python36
        - ansible-test-units-amazon-aws-python38
        - ansible-test-units-amazon-aws-python39
        - cloud-tox-py3
        # integration jobs generated by tools/refresh-aws-periodical-jobs.py
        # and in zuul.d/aws-integration-worker-jobs.yaml
        - ansible-test-changelog

- project-template:
    name: ansible-collections-community-aws
    check:
      queue: integrated-aws
      jobs: &ansible-collections-community-aws-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9:
            branches:
              - stable-1.5
        - ansible-test-sanity-docker-stable-2.11:
            branches:
              - stable-1.5
              - stable-2
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-amazon-aws-python36
        - ansible-test-units-amazon-aws-python38
        - ansible-test-units-amazon-aws-python39
        # integration jobs generated by tools/refresh-aws-periodical-jobs.py
        # and in zuul.d/aws-integration-worker-jobs.yaml
        - ansible-test-changelog
        - ansible-galaxy-importer
    third-party-check:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/amazon.aws
    gate:
      queue: integrated-aws
      jobs: *ansible-collections-community-aws-jobs

- project-template:
    name: ansible-collections-amazon-cloud
    check:
      queue: integrated-aws
      jobs: &ansible-collections-amazon-cloud-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-integration-amazon-cloud
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/amazon.aws
              - name: github.com/ansible-collections/community.aws
              - name: github.com/ansible-collections/community.crypto
    gate:
      queue: integrated-aws
      jobs: *ansible-collections-amazon-cloud-jobs
    ondemand:
      queue: integrated-aws
      jobs: *ansible-collections-amazon-cloud-jobs

- project-template:
    name: ansible-collections-amazon-cloud-code-generator
    check:
      jobs: &ansible-collections-amazon-cloud-generator-jobs
        - ansible-tox-linters
        - ansible-tox-py38
        - ansible-tox-py39
    gate:
      jobs: *ansible-collections-amazon-cloud-generator-jobs

- project-template:
    name: ansible-collections-arista-eos
    check:
      jobs: &ansible-collections-arista-eos-jobs
        - ansible-ee-integration-arista-eos-latest
        - ansible-ee-integration-arista-eos-stable-2.9
        - ansible-ee-integration-arista-eos-stable-2.11
        - ansible-ee-integration-arista-eos-stable-2.12
        - ansible-ee-integration-arista-eos-httpapi-latest
        - ansible-ee-integration-arista-eos-httpapi-stable-2.9
        - ansible-ee-integration-arista-eos-httpapi-stable-2.11
        - ansible-ee-integration-arista-eos-httpapi-stable-2.12
        - ansible-ee-integration-arista-eos-libssh-latest
        - ansible-ee-integration-arista-eos-libssh-stable-2.9
        - ansible-ee-integration-arista-eos-libssh-stable-2.11
        - ansible-ee-integration-arista-eos-libssh-stable-2.12
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-arista-eos-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: ansible-collections-cisco-asa-units
    check:
      jobs: &ansible-collections-cisco-asa-units-jobs
        - ansible-changelog-fragment
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-asa-python39
        - ansible-test-units-asa-python36
        - ansible-test-units-asa-python37
    gate:
      queue: integrated
      jobs: *ansible-collections-cisco-asa-units-jobs

- project-template:
    name: ansible-collections-cisco-asa
    check:
      jobs: &ansible-collections-cisco-asa-jobs
        - ansible-test-network-integration-asa-python39:
            voting: false
        - ansible-test-network-integration-asa-python38-stable212:
            voting: false
        - ansible-test-network-integration-asa-python38-stable214:
            voting: false
        - ansible-test-network-integration-asa-python38-stable211:
            voting: false
        - ansible-test-network-integration-asa-python38-stable29:
            voting: false
        - ansible-test-network-integration-asa-libssh-python39
        - ansible-test-network-integration-asa-libssh-python38-stable214
        - ansible-test-network-integration-asa-libssh-python38-stable212
        - ansible-test-network-integration-asa-libssh-python38-stable211
        - ansible-test-network-integration-asa-libssh-python38-stable29:
            voting: false
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      jobs: *ansible-collections-cisco-asa-jobs

- project-template:
    name: ansible-collections-cisco-nxos
    check:
      jobs:
        - ansible-ee-integration-cisco-nxos-cli-python39-latest:
            voting: false
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: ansible-community-ansible-plugin-builder
    check:
      jobs:
        - ansible-test-integration-ansible-plugin-builder
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs:
        - ansible-test-integration-ansible-plugin-builder
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.utils

- project-template:
    name: ansible-collections-cisco-ios
    check:
      jobs: &ansible-collections-cisco-ios-jobs
        - ansible-ee-integration-ios-latest
        - ansible-ee-integration-ios-stable-2.9
        - ansible-ee-integration-ios-stable-2.11
        - ansible-ee-integration-ios-stable-2.12
        - ansible-ee-integration-ios-libssh-latest
        - ansible-ee-integration-ios-libssh-stable-2.9
        - ansible-ee-integration-ios-libssh-stable-2.11
        - ansible-ee-integration-ios-libssh-stable-2.12
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-cisco-ios-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: ansible-collections-cisco-iosxr
    check:
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: ansible-collections-cisco-iosxr-netconf
    check:
      jobs:
        - ansible-test-network-integration-ansible-netcommon-iosxr-netconf-python38:
            voting: false
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/vyos.vyos
    gate:
      queue: integrated
      fail-fast: true
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/vyos.vyos

- project-template:
    name: ansible-collections-community-kubernetes
    third-party-check:
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/cloud.common
              - name: github.com/ansible-collections/kubernetes.core

- project-template:
    name: ansible-collections-community-okd
    third-party-check:
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/kubernetes.core
                override-checkout: stable-2.2
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-galaxy-importer:
            voting: false
        - ansible-test-units-community-okd-python39
        - ansible-test-sanity-okd-downstream-devel
        - ansible-test-sanity-okd-downstream-milestone:
            voting: false
        - ansible-test-sanity-okd-downstream-stable-2.11
        - ansible-test-sanity-okd-downstream-stable-2.12
        - ansible-test-sanity-okd-downstream-stable-2.13

- project-template:
    name: ansible-collections-cloud-common
    check:
      jobs: &ansible-collections-cloud-common-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-cloud-integration-vmware-rest:
            required-projects:
              - name: github.com/ansible-collections/vmware.vmware_rest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/community.vmware
              - name: github.com/ansible-collections/vmware.vmware_rest
              - name: github.com/ansible-collections/kubernetes.core
        - ansible-test-splitter:
            required-projects:
              - name: github.com/ansible-collections/kubernetes.core
            vars:
              ansible_test_splitter__test_changed: false
              ansible_test_splitter__total_job: 3
              ansible_test_splitter__check_for_changes_in:
                - "~/{{ zuul.projects['github.com/ansible-collections/kubernetes.core'].src_dir }}"
              ansible_test_splitter__releases_to_test:
                - "with-turbo"
        - integration-kubernetes.core-with-turbo-1
        - integration-kubernetes.core-with-turbo-2
        - integration-kubernetes.core-with-turbo-3
    gate:
      jobs: *ansible-collections-cloud-common-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - build-ansible-collection

- project-template:
    name: ansible-collections-community-vmware
    check:
      jobs:
        - ansible-tox-linters
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/vmware.vmware_rest
              - name: github.com/ansible-collections/cloud.common
        - ansible-test-sanity-docker-devel:
            voting: false
        - ansible-test-sanity-docker-milestone:
            voting: false
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-community-vmware-python38
        - ansible-test-cloud-integration-vcenter7_only-stable212
        - ansible-test-cloud-integration-vcenter7_2esxi-stable212
        - ansible-test-cloud-integration-vcenter7_1esxi-stable212_1_of_2
        - ansible-test-cloud-integration-vcenter7_1esxi-stable212_2_of_2
    gate:
      jobs:
        - ansible-tox-linters
        - build-ansible-collection
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-community-vmware-python38

- project-template:
    name: ansible-collections-community-vmware-rest
    check:
      jobs: &ansible-collections-community-vmware-rest-jobs
        - ansible-test-cloud-integration-vmware-rest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/cloud.common
              - name: github.com/ansible-collections/community.vmware
        - ansible-tox-linters
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
    gate:
      jobs: *ansible-collections-community-vmware-rest-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - build-ansible-collection

- project-template:
    name: ansible-collections-community-vmware-rest-code-generator
    check:
      jobs:
        - ansible-test-cloud-integration-vmware-rest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/cloud.common
              - name: github.com/ansible-collections/community.vmware
    gate:
      jobs:
        - ansible-test-cloud-integration-vmware-rest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/cloud.common
              - name: github.com/ansible-collections/community.vmware

- project-template:
    name: ansible-collections-community-asa
    check:
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      jobs:
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils

- project-template:
    name: ansible-collections-community-asa-units
    check:
      jobs: &ansible-collections-community-asa-units-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
    gate:
      jobs: *ansible-collections-community-asa-units-jobs

- project-template:
    name: ansible-collections-ansible-netcommon
    check:
      jobs:
        - ansible-test-network-integration-junos-vsrx-netconf-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-netconf-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-network_cli-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-ee-integration-cisco-nxos-cli-python39-latest:
            voting: false
        - ansible-ee-integration-arista-eos-latest
        - ansible-ee-integration-arista-eos-stable-2.9
        - ansible-ee-integration-arista-eos-stable-2.11
        - ansible-ee-integration-arista-eos-stable-2.12
        - ansible-ee-integration-arista-eos-httpapi-latest
        - ansible-ee-integration-arista-eos-httpapi-stable-2.9:
            voting: false
        - ansible-ee-integration-arista-eos-httpapi-stable-2.11
        - ansible-ee-integration-arista-eos-httpapi-stable-2.12
        - ansible-ee-integration-arista-eos-libssh-latest
        - ansible-ee-integration-arista-eos-libssh-stable-2.9
        - ansible-ee-integration-arista-eos-libssh-stable-2.11
        - ansible-ee-integration-arista-eos-libssh-stable-2.12
        - ansible-ee-integration-ios-latest
        - ansible-ee-integration-ios-stable-2.9
        - ansible-ee-integration-ios-stable-2.11
        - ansible-ee-integration-ios-stable-2.12
        - ansible-ee-integration-ios-libssh-latest
        - ansible-ee-integration-ios-libssh-stable-2.9
        - ansible-ee-integration-ios-libssh-stable-2.11
        - ansible-ee-integration-ios-libssh-stable-2.12
        - ansible-ee-integration-vyos-latest
        - ansible-ee-integration-vyos-libssh-latest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/vyos.vyos
    gate:
      queue: integrated
      fail-fast: true
      jobs:
        - ansible-test-network-integration-junos-vsrx-netconf-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-netconf-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-network_cli-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
            voting: false
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-ee-integration-cisco-nxos-cli-python39-latest:
            voting: false
        - ansible-ee-integration-arista-eos-latest
        - ansible-ee-integration-arista-eos-httpapi-stable-2.9:
            voting: false
        - ansible-ee-integration-arista-eos-libssh-latest
        - ansible-ee-integration-arista-eos-libssh-stable-2.9
        - ansible-ee-integration-ios-latest
        - ansible-ee-integration-ios-stable-2.11
        - ansible-ee-integration-ios-libssh-latest
        - ansible-ee-integration-ios-libssh-stable-2.11
        - ansible-ee-integration-vyos-latest
        - ansible-ee-integration-vyos-libssh-latest
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/vyos.vyos

- project-template:
    name: ansible-collections-juniper-junos
    check:
      jobs: &ansible-collections-juniper-junos-jobs
        - ansible-test-network-integration-junos-vsrx-netconf-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39-stable212:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python36-stable29:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python36-stable211:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-netconf-python39-stable214:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-python39-stable214:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - ansible-test-network-integration-junos-vsrx-network_cli-libssh-python39-stable214:
            vars:
              ansible_test_integration_targets: "junos_.*"
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-juniper-junos-jobs

- project-template:
    name: ansible-collections-juniper-junos-netconf
    check:
      jobs: &ansible-collections-juniper-junos-netconf-jobs
        - ansible-test-network-integration-ansible-netcommon-junos-vsrx-netconf-python39
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/junipernetworks.junos
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-juniper-junos-netconf-jobs

- project-template:
    name: ansible-collections-kubernetes-core-units
    check:
      jobs: &ansible-collections-kubernetes-core-units-jobs
        - build-ansible-collection
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone:
            voting: false
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-kubernetes-core-python38
        - ansible-test-splitter:
            required-projects:
              - name: github.com/ansible-collections/kubernetes.core
            vars:
              ansible_test_splitter__test_changed: true
              ansible_test_splitter__total_job: 3
              ansible_test_splitter__releases_to_test:
                - "devel"
                - "milestone"
                - "2.9"
                - "2.10"
                - "with-turbo"
        - integration-kubernetes.core-devel-1
        - integration-kubernetes.core-devel-2
        - integration-kubernetes.core-devel-3
        - integration-kubernetes.core-milestone-1
        - integration-kubernetes.core-milestone-2
        - integration-kubernetes.core-milestone-3
        - integration-kubernetes.core-2.9-1
        - integration-kubernetes.core-2.9-2
        - integration-kubernetes.core-2.9-3
        - integration-kubernetes.core-2.10-1
        - integration-kubernetes.core-2.10-2
        - integration-kubernetes.core-2.10-3
        - integration-kubernetes.core-with-turbo-1
        - integration-kubernetes.core-with-turbo-2
        - integration-kubernetes.core-with-turbo-3
        - ansible-tox-linters
        - ansible-test-changelog
    gate:
      jobs: *ansible-collections-kubernetes-core-units-jobs
    ondemand:
      jobs:
        - build-ansible-collection
        - ansible-test-splitter:
            required-projects:
              - name: github.com/ansible-collections/kubernetes.core
            vars:
              ansible_test_splitter__test_changed: false
              ansible_test_splitter__total_job: 3
              ansible_test_splitter__releases_to_test:
                - "devel"
                - "milestone"
                - "2.9"
                - "2.10"
                - "with-turbo"
        - integration-kubernetes.core-devel-1
        - integration-kubernetes.core-devel-2
        - integration-kubernetes.core-devel-3
        - integration-kubernetes.core-milestone-1
        - integration-kubernetes.core-milestone-2
        - integration-kubernetes.core-milestone-3
        - integration-kubernetes.core-2.9-1
        - integration-kubernetes.core-2.9-2
        - integration-kubernetes.core-2.9-3
        - integration-kubernetes.core-2.10-1
        - integration-kubernetes.core-2.10-2
        - integration-kubernetes.core-2.10-3
        - integration-kubernetes.core-with-turbo-1
        - integration-kubernetes.core-with-turbo-2
        - integration-kubernetes.core-with-turbo-3
        - ansible-test-changelog

- project-template:
    name: ansible-collections-vyos-vyos
    check:
      jobs: &ansible-collections-vyos-vyos-jobs
        - ansible-ee-integration-vyos-latest
        - ansible-ee-integration-vyos-stable-2.12
        - ansible-ee-integration-vyos-stable-2.11
        - ansible-ee-integration-vyos-stable-2.9
        - ansible-ee-integration-vyos-libssh-latest
        - ansible-ee-integration-vyos-libssh-stable-2.12
        - ansible-ee-integration-vyos-libssh-stable-2.11
        - ansible-ee-integration-vyos-libssh-stable-2.9
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-vyos-vyos-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: ansible-collections-frr-frr-units
    check:
      jobs: &ansible-collections-ffr-ffr-units-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-frr-python36
        - ansible-test-units-frr-python37
        - ansible-test-units-frr-python38
        - ansible-test-units-frr-python39
    gate:
      queue: integrated
      jobs: *ansible-collections-ffr-ffr-units-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-frr-python38
        - build-ansible-collection

- project-template:
    name: ansible-collections-ansible-netcommon-units
    check:
      jobs: &ansible-collections-ansible-netcommon-units-jobs
        - ansible-changelog-fragment
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-ansible-netcommon-units-jobs

- project-template:
    name: ansible-collections-ansible-network-units
    check:
      jobs: &ansible-collections-ansible-network-units-jobs
        - ansible-changelog-fragment
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.network
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/frr.frr
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/vyos.vyos
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-ansible-network-units-jobs

- project-template:
    name: ansible-collections-ansible-security
    check:
      jobs: &ansible-collections-ansible-security-jobs
        - ansible-changelog-fragment
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.security
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/cisco.asa
              - name: github.com/ansible-collections/ibm.qradar
              - name: github.com/ansible-collections/splunk.es
              - name: github.com/ansible-collections/trendmicro.deepsec
    gate:
      queue: integrated
      jobs: *ansible-collections-ansible-security-jobs

- project-template:
    name: ansible-collections-ansible-yang-units
    check:
      jobs: &ansible-collections-ansible-yang-units-jobs
        - ansible-changelog-fragment
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-ansible-yang-python36
        - ansible-test-units-ansible-yang-python37
        - ansible-test-units-ansible-yang-python38
        - ansible-test-units-ansible-yang-python39
    gate:
      queue: integrated
      jobs: *ansible-collections-ansible-yang-units-jobs

- project-template:
    name: ansible-collections-ansible-yang-juniper-junos
    check:
      jobs: &ansible-collections-juniper-junos-ansible-yang-jobs
        - ansible-test-network-integration-ansible-yang-junos-vsrx-netconf-python39
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.yang
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      jobs: *ansible-collections-juniper-junos-ansible-yang-jobs

- project-template:
    name: ansible-collections-ansible-yang-cisco-iosxr
    check:
      jobs: &ansible-collections-cisco-iosxr-ansible-yang-jobs
        - ansible-test-network-integration-ansible-yang-iosxr-netconf-python36:
            voting: false
        - ansible-test-network-integration-ansible-yang-iosxr-netconf-python38:
            voting: false
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.yang
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-cisco-iosxr-ansible-yang-jobs

- project-template:
    name: ansible-collections-community-yang-units
    check:
      jobs: &ansible-collections-community-yang-units-jobs
        - ansible-changelog-fragment
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-yang-python27
        - ansible-test-units-yang-python36
        - ansible-test-units-yang-python37
        - ansible-test-units-yang-python38
    gate:
      queue: integrated
      jobs: *ansible-collections-community-yang-units-jobs

- project-template:
    name: ansible-collections-community-yang-juniper-junos
    check:
      jobs: &ansible-collections-juniper-junos-yang-jobs
        - ansible-test-network-integration-community-yang-junos-vsrx-netconf-python36
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/community.yang
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      jobs: *ansible-collections-juniper-junos-yang-jobs

- project-template:
    name: ansible-collections-community-yang-cisco-iosxr
    check:
      jobs: &ansible-collections-cisco-iosxr-yang-jobs
        - ansible-test-network-integration-community-yang-iosxr-netconf-python36:
            voting: false
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/community.yang
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      fail-fast: true
      jobs: *ansible-collections-cisco-iosxr-yang-jobs


- project-template:
    name: ansible-collections-ansible-posix-units
    check:
      jobs: &ansible-collections-ansible-posix-units-jobs
        - ansible-changelog-fragment
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-units-posix-python39
        - ansible-test-units-posix-python310
    gate:
      jobs: *ansible-collections-ansible-posix-units-jobs

- project-template:
    name: ansible-collections-security-ibm-qradar
    check:
      jobs: &ansible-collections-security-ibm-qradar-jobs
        - build-ansible-collection
        - ansible-changelog-fragment
        - ansible-test-security-integration-qradar-python36:
            voting: false
        - ansible-test-security-integration-qradar-python38:
            voting: false
        - ansible-test-security-integration-qradar-python39:
            voting: false
        - ansible-test-security-integration-qradar-python38-stable29:
            voting: false
        - ansible-test-security-integration-qradar-python39-stable211:
            voting: false
        - ansible-test-security-integration-qradar-python39-stable212:
            voting: false
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
    gate:
      jobs: *ansible-collections-security-ibm-qradar-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-security-integration-qradar-python39
        - build-ansible-collection

- project-template:
    name: ansible-collections-security-splunk-es
    check:
      jobs: &ansible-collections-security-splunk-es-jobs
        - build-ansible-collection
        - ansible-changelog-fragment
        - ansible-security-integration-splunk-es-python36:
            voting: false
        - ansible-security-integration-splunk-es-python37:
            voting: false
        - ansible-security-integration-splunk-es-python38:
            voting: false
        - ansible-security-integration-splunk-es-python39:
            voting: false
        - ansible-security-integration-splunk-es-python38-stable29:
            voting: false
        - ansible-security-integration-splunk-es-python39-stable211:
            voting: false
        - ansible-security-integration-splunk-es-python39-stable212:
            voting: false
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-splunk-python36
        - ansible-test-units-splunk-python37
        - ansible-test-units-splunk-python39
    gate:
      jobs: *ansible-collections-security-splunk-es-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-splunk-python37
        - ansible-test-units-splunk-python39
        - ansible-security-integration-splunk-es-python39
        - build-ansible-collection

- project-template:
    name: ansible-collections-security-trendmicro-deepsec-units
    check:
      jobs: &ansible-collections-security-trendmicro-deepsec-jobs
        - build-ansible-collection
        - ansible-changelog-fragment
        - ansible-security-integration-trendmicro-deepsec-python36
        - ansible-security-integration-trendmicro-deepsec-python37
        - ansible-security-integration-trendmicro-deepsec-python38
        - ansible-security-integration-trendmicro-deepsec-python39
        - ansible-security-integration-trendmicro-deepsec-python38-stable29
        - ansible-security-integration-trendmicro-deepsec-python39-stable211
        - ansible-security-integration-trendmicro-deepsec-python39-stable212
        - ansible-test-sanity-docker-devel:
            voting: false
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-trendmicro-python36
        - ansible-test-units-trendmicro-python37
        - ansible-test-units-trendmicro-python39
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      jobs: *ansible-collections-security-trendmicro-deepsec-jobs
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-trendmicro-python39
        - ansible-test-units-trendmicro-python37
        - ansible-security-integration-trendmicro-deepsec-python38
        - build-ansible-collection

- project-template:
    name: ansible-collections-servicenow-itsm-units
    check:
      jobs: &ansible-collections-servicenow-itsm-units-jobs
        - build-ansible-collection
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - ansible-test-units-servicenow-itsm-python27
        - ansible-test-units-servicenow-itsm-python36
        - ansible-test-units-servicenow-itsm-python37
        - ansible-test-units-servicenow-itsm-python38
    gate:
      jobs: *ansible-collections-servicenow-itsm-units-jobs

- project-template:
    name: ansible-collections-symantec-epm-units
    check:
      jobs: &ansible-collections-symantec-epm-units-jobs
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
    gate:
      jobs: *ansible-collections-symantec-epm-units-jobs

- project-template:
    name: ansible-test-network-integration

- project-template:
    name: ansible-ee-tests
    description: |
      This is a set of jobs, run the sanity and unit tests from within
      a clean and up to date EE container.
    check:
      jobs: &ansible-ee-test-jobs
        # Latest is expected to break from time to time.
        - ansible-ee-tests-latest:
            voting: false
        # Temporary change due to rstcheck versioning issues.
        # https://github.com/ansible/ansible-zuul-jobs/pull/1496
        - ansible-ee-tests-stable-2.9:
            voting: false
        - ansible-ee-tests-stable-2.11
        - ansible-ee-tests-stable-2.12
    gate:
      jobs: *ansible-ee-test-jobs

- project-template:
    name: network-ee-tests
    description: |
      This is a set of jobs, run from within a network execution environment
      to validate network collections are working properly. This depends on
      network-ee-container-image-jobs project-template.
    check:
      jobs: &network-ee-test-jobs
        - network-ee-sanity-tests
        - network-ee-sanity-tests-stable-2.9
        - network-ee-sanity-tests-stable-2.10
        - network-ee-sanity-tests-stable-2.11
        - network-ee-sanity-tests-stable-2.12
        - network-ee-unit-tests
        - network-ee-unit-tests-stable-2.9
        - network-ee-unit-tests-stable-2.10
        - network-ee-unit-tests-stable-2.11
        - network-ee-unit-tests-stable-2.12
    gate:
      jobs: *network-ee-test-jobs
      fail-fast: true

- project-template:
    name: ansible-collections-ansible-network
    periodic:
      jobs:
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone
        - ansible-test-sanity-docker-stable-2.9
        - ansible-test-sanity-docker-stable-2.10
        - ansible-test-sanity-docker-stable-2.11
        - ansible-test-sanity-docker-stable-2.12
        - build-ansible-collection

- project-template:
    name: noop-jobs
    description: |
      This template runs no jobs, it is needed if a project does not use
      any single job so that changes can get merged.

      Do not use this with projects that have jobs defined in the gate
      pipeline.
    check:
      jobs:
        - noop
    gate:
      jobs:
        - noop

- project-template:
    name: publish-to-galaxy-master-only
    description: |
      Publish an Ansible collection to Ansible Galaxy
    check:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    gate:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    pre-release:
      jobs:
        - release-ansible-collection-galaxy
    release:
      jobs:
        - release-ansible-collection-galaxy

- project-template:
    name: publish-to-automation-hub
    description: |
      Publish an Ansible collection to Ansible Automation Hub
    check:
      jobs:
        - build-ansible-collection
    gate:
      jobs:
        - build-ansible-collection
    pre-release:
      jobs:
        - release-ansible-collection-automation-hub
    release:
      jobs:
        - release-ansible-collection-automation-hub
        - release-ansible-collection-announcement:
            dependencies:
              - name: release-ansible-collection-automation-hub
              - name: release-ansible-collection-galaxy
                soft: true

- project-template:
    name: publish-to-automation-hub-3pci
    description: |
      Publish an Ansible collection to Ansible Automation Hub
    third-party-check:
      jobs:
        - build-ansible-collection
    pre-release:
      jobs:
        - release-ansible-collection-automation-hub
    release:
      jobs:
        - release-ansible-collection-automation-hub
        - release-ansible-collection-announcement:
            dependencies:
              - name: release-ansible-collection-automation-hub
              - name: release-ansible-collection-galaxy
                soft: true

- project-template:
    name: publish-to-galaxy
    description: |
      Publish an Ansible collection to Ansible Galaxy
    check:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    gate:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    pre-release:
      jobs:
        - release-ansible-collection-galaxy
    release:
      jobs:
        - release-ansible-collection-galaxy

- project-template:
    name: publish-to-galaxy-3pci
    description: |
      Publish an Ansible collection to Ansible Galaxy
    third-party-check:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    pre-release:
      jobs:
        - release-ansible-collection-galaxy
    release:
      jobs:
        - release-ansible-collection-galaxy

- project-template:
    name: publish-to-galaxy-dev
    description: |
      Publish an Ansible collection to Ansible Galaxy Dev
    check:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    gate:
      jobs:
        - ansible-galaxy-importer
        - build-ansible-collection
    post-release:
      jobs:
        - release-ansible-collection-galaxy-dev
    release:
      jobs:
        - release-ansible-collection-galaxy-dev

- project-template:
    name: publish-to-pypi
    description: |
      Publish a Python package to PyPI.
    check:
      jobs:
        - ansible-build-python-tarball
    gate:
      jobs:
        - ansible-build-python-tarball
    pre-release:
      jobs:
        - release-ansible-python
    release:
      jobs:
        - release-ansible-python

- project-template:
    name: publish-to-pypi-poetry
    description: |
      Publish a Python package (using poetry) to PyPI.
    check:
      jobs:
        - ansible-build-python-tarball-poetry
    gate:
      jobs:
        - ansible-build-python-tarball-poetry
    pre-release:
      jobs:
        - release-ansible-python-poetry
    release:
      jobs:
        - release-ansible-python-poetry

- project-template:
    name: system-required
    description: |
      Jobs that *every* project in Ansible should have by default.

      This is automatically added to all projects in Ansible zuul tenant, no
      repository should use this directly.
    # Include a check queue so that initially every repo has a check queue
    # and we can report invalid zuul.yaml files.
    lgtm:
      jobs:
        - noop
    unlabel-on-push:
      jobs:
        - noop

- project-template:
    name: network-ee-container-image-jobs
    check:
      jobs: &id001
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/amazon.aws
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.network
              - name: github.com/ansible-collections/ansible.posix
              - name: github.com/ansible-collections/ansible.security
              - name: github.com/ansible-collections/ansible.utils
              - name: github.com/ansible-collections/arista.eos
              - name: github.com/ansible-collections/cisco.asa
              - name: github.com/ansible-collections/cisco.ios
              - name: github.com/ansible-collections/cisco.iosxr
              - name: github.com/ansible-collections/cisco.nxos
              - name: github.com/ansible-collections/cloud.common
              - name: github.com/ansible-collections/frr.frr
              - name: github.com/ansible-collections/ibm.qradar
              - name: github.com/ansible-collections/junipernetworks.junos
              - name: github.com/ansible-collections/kubernetes.core
              - name: github.com/ansible-collections/openvswitch.openvswitch
              - name: github.com/ansible-collections/servicenow.itsm
              - name: github.com/ansible-collections/splunk.es
              - name: github.com/ansible-collections/trendmicro.deepsec
              - name: github.com/ansible-collections/vmware.vmware_rest
              - name: github.com/ansible-collections/vyos.vyos
        - ansible-buildset-registry:
            dependencies:
              - build-ansible-collection
        - network-ee-build-container-image
        - network-ee-build-container-image-stable-2.9
        - network-ee-build-container-image-stable-2.10
        - network-ee-build-container-image-stable-2.11
        - network-ee-build-container-image-stable-2.12
    gate:
      jobs: *id001
    post:
      jobs: &id002
        - ansible-buildset-registry
        - network-ee-upload-container-image:
            vars:
              upload_container_image_promote: false
        - network-ee-upload-container-image-stable-2.9:
            vars:
              upload_container_image_promote: false
        - network-ee-upload-container-image-stable-2.10:
            vars:
              upload_container_image_promote: false
        - network-ee-upload-container-image-stable-2.11:
            vars:
              upload_container_image_promote: false
        - network-ee-upload-container-image-stable-2.12:
            vars:
              upload_container_image_promote: false

# openvswitch.openvswitch
- project-template:
    name: ansible-collections-openvswitch-openvswitch
    check:
      jobs: &ansible-collections-openvswitch-openvswitch-jobs
        - ansible-ee-integration-ovs-latest
        - ansible-ee-integration-ovs-stable2.12
        - ansible-ee-integration-ovs-stable2.11
        - ansible-ee-integration-ovs-stable2.10
        - ansible-ee-integration-ovs-stable2.9
        - build-ansible-collection:
            required-projects:
              - name: github.com/ansible-collections/ansible.netcommon
              - name: github.com/ansible-collections/ansible.utils
    gate:
      queue: integrated
      jobs: *ansible-collections-openvswitch-openvswitch-jobs
    periodic:
      jobs:
        - build-ansible-collection

- project-template:
    name: ansible-collections-cloud-aws_troubleshooting
    check:
      jobs: &ansible-collections-cloud-aws_troubleshooting-jobs
        - ansible-tox-linters
    gate:
      jobs: *ansible-collections-cloud-aws_troubleshooting-jobs

- project-template:
    name: ansible-collections-cloud-aws_ops
    check:
      jobs: &ansible-collections-cloud-aws_ops-jobs
        - ansible-tox-linters
    gate:
      jobs: *ansible-collections-cloud-aws_ops-jobs

- project-template:
    name: ansible-collections-cloud-terraform-units
    check:
      jobs: &ansible-collections-cloud-terraform-units-jobs
        - build-ansible-collection
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone:
            voting: false
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-cloud-terraform-python38
        - ansible-test-changelog
        - ansible-galaxy-importer
    gate:
      jobs: *ansible-collections-cloud-terraform-units-jobs

- project-template:
    name: ansible-collections-cloud-gouttelette-units
    check:
      jobs: &ansible-collections-cloud-gouttelette-units-jobs
        - build-ansible-collection
        - ansible-test-sanity-docker-devel
        - ansible-test-sanity-docker-milestone:
            voting: false
        - ansible-test-sanity-docker-stable-2.13
        - ansible-test-sanity-docker-stable-2.14
        - ansible-test-units-gouttelette-python39
        - ansible-test-changelog
        - ansible-galaxy-importer
    gate:
      jobs: *ansible-collections-cloud-gouttelette-units-jobs
