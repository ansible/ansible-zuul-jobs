---
# ansible-collections/openvswitch.openvswitch jobs
# =============================================================================
- job:
    name: ansible-network-openvswitch-appliance
    parent: ansible-network-appliance-base
    pre-run:
      - playbooks/ansible-network-openvswitch-appliance/pre.yaml
    run: playbooks/ansible-network-openvswitch-appliance/run.yaml
    host-vars:
      openvswitch-2.15.0:
        ansible_network_os: openvswitch
    required-projects:
      - name: github.com/ansible/ansible-zuul-jobs
    nodeset: openvswitch-2.15.0

- job:
    name: ansible-test-units-openvswitch-python39
    parent: ansible-test-units-base-python39
    required-projects:
      - name: github.com/ansible-collections/openvswitch.openvswitch
    vars:
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch

- job:
    name: ansible-test-units-openvswitch-python36
    parent: ansible-test-units-base-python36
    required-projects:
      - name: github.com/ansible-collections/openvswitch.openvswitch
      - name: github.com/ansible/ansible
        override-checkout: stable-2.9
    vars:
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch

- job:
    name: ansible-test-units-openvswitch-python37
    parent: ansible-test-units-base-python37
    required-projects:
      - name: github.com/ansible-collections/openvswitch.openvswitch
      - name: github.com/ansible/ansible
        override-checkout: stable-2.9
    vars:
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch

- job:
    name: ansible-test-units-openvswitch-python38
    parent: ansible-test-units-base-python38
    required-projects:
      - name: github.com/ansible-collections/openvswitch.openvswitch
    vars:
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch


# ansible-test
- job:
    name: ansible-test-integration-ovs-latest
    parent: ansible-network-openvswitch-appliance
    pre-run:
      - playbooks/ansible-test-base/pre.yaml
      - playbooks/ansible-test-network-integration-base/pre.yaml
    run: playbooks/ansible-test-base/run.yaml
    post-run:
      - playbooks/ansible-test-network-integration-base/post.yaml
      - playbooks/ansible-test-base/post.yaml
    required-projects:
      - name: github.com/ansible-collections/openvswitch.openvswitch
      - name: github.com/ansible/ansible
    vars:
      ansible_test_command: network-integration
      ansible_runner_container_version: latest
      ansible_test_python: 3.9
      # container_image_tests:
      #  - integration
      ansible_network_os: openvswitch
      # test_ansible_ssh_private_key_file: ~/.ssh/id_ecdsa
      # test_ansible_python_interpreter: /usr/bin/python3.9
      # test_ansible_network_cli_ssh_type: libssh
      ansible_collections_repo: github.com/ansible-collections/openvswitch.openvswitch
      ansible_test_integration_targets: "openvswitch_.*"
    nodeset: openvswitch-2.15.0

- job:
    name: ansible-test-integration-ovs-stable2.11
    parent: ansible-test-integration-ovs-latest
    vars:
      ansible_runner_container_version: stable-2.11-devel

- job:
    name: ansible-test-integration-ovs-stable2.12
    parent: ansible-test-integration-ovs-latest
    vars:
      ansible_runner_container_version: stable-2.12-devel

- job:
    name: ansible-test-integration-ovs-stable2.10
    parent: ansible-test-integration-ovs-latest
    vars:
      ansible_runner_container_version: stable-2.10-devel

- job:
    name: ansible-test-integration-ovs-stable2.9
    parent: ansible-test-integration-ovs-latest
    vars:
      test_ansible_python_interpreter: /usr/bin/python3.8
      ansible_runner_container_version: stable-2.9-devel
